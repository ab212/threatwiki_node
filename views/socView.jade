extends layout

block head
  script(src="/javascript/soc_view.js")

block pageContent
  ul.breadcrumb
    li 
      a(href="/soc") List of SOC
      span.divider
    if (typeof(tags) != 'undefined')
      li.active SOC: #{soc.title}
    else
      li 
        a(href="/soc/view?soc="+soc.title) SOC: #{soc.title}
        span.divider
      li.active Tag: #{tag.title}
  //
    div.row-fluid
      div.span4
        a(href='/datapoint/create?soc='+soc.title,class='primaryButton',style="color:#fff") New Datapoint for SOC #{soc.title}
      div.span4 
        a(href="/soc/edit?id="+soc._id) Edit SOC
      div.span4 



  div.container-fluid
    div.row-fluid
      div.span2
        div(class="well sidebar-nav")
          ul(class="nav nav-list")
            li.nav-header Actions
            li 
              if (typeof(tag) == 'undefined')
                a(href='/datapoint/create?soc='+soc.title) New Datapoint
              else
                a(href='/datapoint/create?soc='+soc.title+"&tag="+tag._id) New Datapoint
            li
              a(href='/tag/create?soc='+soc.title) New Tag
            li
              a(href="/soc/edit?id="+soc._id) Edit SOC
            if (typeof(tag) != 'undefined')
              li
                a(href="/tag/edit?id="+tag._id) Edit Tag
            if (typeof(tags) != 'undefined')
              li.nav-header Refine Datapoints by Tags
              each tag, i in tags
                li 
                  a(href="/soc/view?soc="+soc.title+"&tag="+tag._id) #{tag.title}
      div.span10
        if (typeof(tag) != 'undefined')
          p.well Tag Description: #{tag.description}
        table(class='table table-striped table-bordered')#datapoint.display
          thead
            tr
              th Title
              th Location
              th Tags
              th Event Date
              th Modified
              th By
              th Created
              th By
          tbody
           each datapoint, i in datapoints
              tr(id="row_"+datapoint._id)
                td
                  a(href="/datapoint/edit?id="+datapoint._id) #{datapoint.title}
                td
                  span #{datapoint.Location.title}
                td
                  each tags in datapoint.tags
                    span #{tags.title} <br />
                td
                  span #{datapoint.event_date}
                td
                  span #{datapoint.modified}
                td
                  span #{datapoint.modifiedBy.name}
                td
                  span #{datapoint.created}
                td
                  span #{datapoint.createdBy.name}